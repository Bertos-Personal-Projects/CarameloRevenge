[gd_scene load_steps=20 format=3 uid="uid://cfcb8x1x1xkyi"]

[ext_resource type="Script" uid="uid://c2kvw8fjbict6" path="res://entities/game_manager/game_manager.gd" id="1_fhblf"]
[ext_resource type="PackedScene" uid="uid://5v15ywv7qutf" path="res://entities/characters/player/player.tscn" id="3_js8ih"]
[ext_resource type="Script" uid="uid://dnni83x2s0ao3" path="res://entities/levels/the_feirinha/wave_manager.gd" id="4_2db8p"]
[ext_resource type="Script" uid="uid://ch4xfs6ybmbhh" path="res://entities/wave/wave_spawner.gd" id="4_7s2d2"]
[ext_resource type="Script" uid="uid://iwsqyxewfu7t" path="res://commons/camera/camera_2d.gd" id="4_chp68"]
[ext_resource type="Script" uid="uid://dtbcix6ijos0t" path="res://commons/camera/shake_effect.gd" id="5_xrwcm"]
[ext_resource type="PackedScene" uid="uid://ce6dqcc35ig10" path="res://entities/characters/enemies/crazy_dog/crazy_dog.tscn" id="6_8d28p"]
[ext_resource type="PackedScene" uid="uid://bqg1tuwgusvc2" path="res://entities/items/item.tscn" id="8_b6khs"]
[ext_resource type="Resource" uid="uid://cqxh7qavr5dd8" path="res://entities/items/projectile_weapons/data/wooden_bow.tres" id="9_ab0rd"]
[ext_resource type="PackedScene" uid="uid://b7g3au0cjqlv5" path="res://entities/characters/enemies/orange_cat/orange_cat.tscn" id="11_2dyao"]
[ext_resource type="PackedScene" uid="uid://w46rt74u1qc2" path="res://entities/ui/game_over/game_over.tscn" id="11_skm2o"]
[ext_resource type="Theme" uid="uid://drib477dub3xk" path="res://assets/themes/hud.tres" id="12_ojpus"]
[ext_resource type="PackedScene" uid="uid://c6ivgk5asmrxa" path="res://entities/ui/hud.tscn" id="12_qjj5b"]
[ext_resource type="Texture2D" uid="uid://cc1ktqoddy5vx" path="res://entities/levels/the_feirinha/teste-mapa-novo-final2.png" id="15_u2k53"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ojpus"]
vertices = PackedVector2Array(848.094, 481.008, -868.906, 483.977, -861.078, -485.969, 856.898, -482.023)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2), PackedInt32Array(2, 3, 0)])
outlines = Array[PackedVector2Array]([PackedVector2Array(-871, -496, 867, -492, 858, 491, -879, 494)])
sample_partition_type = 1
parsed_collision_mask = 4278190081
source_geometry_mode = 1

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_u2k53"]
radius = 44.0
height = 108.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_u2k53"]
size = Vector2(261, 178)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2dyao"]
size = Vector2(260, 149)

[sub_resource type="TileSet" id="TileSet_ojpus"]

[node name="TheFeirinha" type="Node2D"]

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.3, 0.3)
texture = ExtResource("15_u2k53")

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
navigation_polygon = SubResource("NavigationPolygon_ojpus")

[node name="StaticBody2D" type="StaticBody2D" parent="NavigationRegion2D"]
disable_mode = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(-19, -18)
rotation = 1.57079
shape = SubResource("CapsuleShape2D_u2k53")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(-251.5, -246)
shape = SubResource("RectangleShape2D_u2k53")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(-330, -154.5)
shape = SubResource("RectangleShape2D_2dyao")

[node name="CollisionShape2D4" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(293.5, 157)
shape = SubResource("RectangleShape2D_u2k53")

[node name="CollisionShape2D5" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(215, 248.5)
shape = SubResource("RectangleShape2D_2dyao")

[node name="CollisionShape2D6" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(-330, 157)
shape = SubResource("RectangleShape2D_u2k53")

[node name="CollisionShape2D7" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(-251, 248.5)
shape = SubResource("RectangleShape2D_2dyao")

[node name="CollisionShape2D8" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(215, -246)
shape = SubResource("RectangleShape2D_u2k53")

[node name="CollisionShape2D9" type="CollisionShape2D" parent="NavigationRegion2D/StaticBody2D"]
position = Vector2(294, -154.5)
shape = SubResource("RectangleShape2D_2dyao")

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("player", "GameOverScreen")]
script = ExtResource("1_fhblf")
player = NodePath("../Player")
GameOverScreen = NodePath("../CanvasLayer/GameOver")

[node name="Camera2D" type="Camera2D" parent="." node_paths=PackedStringArray("target")]
position = Vector2(-9, -79)
scale = Vector2(5, 5)
zoom = Vector2(2, 2)
script = ExtResource("4_chp68")
target = NodePath("../Player")

[node name="ShakeEffect" type="Node" parent="Camera2D"]
script = ExtResource("5_xrwcm")
metadata/_custom_type_script = "uid://dtbcix6ijos0t"

[node name="Player" parent="." instance=ExtResource("3_js8ih")]
position = Vector2(96, -29)

[node name="WaveManager" type="Node" parent="."]
script = ExtResource("4_2db8p")
metadata/_custom_type_script = "uid://cuvwto1xhh3qp"

[node name="CrazyDog" type="Node" parent="WaveManager"]
script = ExtResource("4_7s2d2")
_enemies_packed_scenes = ExtResource("6_8d28p")
_max_enemies = 3
_spawn_delay = 5.0
metadata/_custom_type_script = "uid://ch4xfs6ybmbhh"

[node name="OrangeCat" type="Node" parent="WaveManager"]
script = ExtResource("4_7s2d2")
_enemies_packed_scenes = ExtResource("11_2dyao")
_max_enemies = 3
_spawn_delay = 5.0
metadata/_custom_type_script = "uid://ch4xfs6ybmbhh"

[node name="Item" parent="." instance=ExtResource("8_b6khs")]
position = Vector2(96, 0)
itemData = ExtResource("9_ab0rd")

[node name="Control" type="Control" parent="Item"]
z_index = 30
layout_mode = 3
anchors_preset = 0
offset_left = -42.0
offset_top = -8.0
offset_right = -2.0
offset_bottom = 32.0
theme = ExtResource("12_ojpus")

[node name="Label" type="Label" parent="Item/Control"]
layout_mode = 0
offset_left = -53.0
offset_top = -32.0
offset_right = 68.0
offset_bottom = -9.0
text = "Press E to pickp"

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="HUD" parent="CanvasLayer" instance=ExtResource("12_qjj5b")]

[node name="GameOver" parent="CanvasLayer" instance=ExtResource("11_skm2o")]
visible = false

[node name="FmodEventEmitter2D" type="FmodEventEmitter2D" parent="."]
event_name = "event:/music/music02"
event_guid = "{a63d2146-cd16-4f94-bb9c-59d529728249}"
autoplay = true

[node name="FmodBankLoader" type="FmodBankLoader" parent="."]
bank_paths = ["res://fmod/Build/Desktop/Master.bank", "res://fmod/Build/Desktop/music.bank"]

[node name="FmodEventEmitter2D2" type="FmodEventEmitter2D" parent="."]
event_guid = "{00000340-0000-0000-7000-000000000000}"

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_set = SubResource("TileSet_ojpus")

[connection signal="picked_up" from="Item" to="WaveManager" method="_on_item_picked_up"]
